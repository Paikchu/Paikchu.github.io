# Lettuce

为什么使用lettuce而不是jedis？对响应式和微服务有更好的适配。
Lettuce底层基于NIO，采用异步事件驱动的通信模式。

少量线程处理大量并发，防止开过多线程

### **天生线程安全，无需连接池 “兜底”**

Lettuce 的核心对象`StatefulRedisConnection`是**线程安全的**，一个连接可以被多个线程共享使用，无需频繁创建 / 销毁连接。

- 优势：避免了 Jedis 因 “非线程安全” 而必须依赖连接池（如 JedisPool）的复杂性（连接池需配置最大连接数、超时时间等，参数不当易引发性能问题）。
- 场景：在多线程环境（如 Web 服务器）中，Lettuce 可直接复用连接，减少资源消耗。

### **3. 完善的分布式场景支持**

Lettuce 对 Redis 的各种部署模式（单机、哨兵、集群 Redis Cluster）提供了更原生、稳定的支持：

- 集群模式：自动发现集群节点、处理槽位迁移、故障转移（如主从切换），无需手动维护节点列表。
- 哨兵模式：自动监听哨兵节点，感知 Redis 主从切换，动态更新连接目标，保证高可用。
- 对比：Jedis 对集群的支持早期较弱（需手动处理节点刷新），后期虽有改进，但稳定性仍不及 Lettuce。

Lettuce 原生支持**Reactive Streams**规范，可与 Spring WebFlux、Project Reactor 等响应式框架无缝集成，实现 “非阻塞全链路” 编程。

- 优势：在响应式架构中（如微服务异步调用），避免阻塞等待 Redis 响应，提升系统整体吞吐量。
- 对比：Jedis 仅支持同步操作，无法直接适配响应式场景。